From 88b2c772f24c817585ec9ca75685a818d8f3ed62 Mon Sep 17 00:00:00 2001
From: Mark Enriquez <enriquezmark36@gmail.com>
Date: Fri, 27 Sep 2019 22:04:29 +0800
Subject: [PATCH] soong_config: Add BOARD_CANT_REALLOCATE_OMX_BUFFERS

Change-Id: Iee0798705901534c8b8a15d883b2e1eac29c4dd4
Signed-off-by: Mark Enriquez <enriquezmark36@gmail.com>
---
 build/soong/android/variable.go | 4 ++++
 build/soong/soong_config.mk     | 1 +
 2 files changed, 5 insertions(+)

diff --git a/build/soong/android/variable.go b/build/soong/android/variable.go
index 29247c01..54bee93d 100644
--- a/build/soong/android/variable.go
+++ b/build/soong/android/variable.go
@@ -12,6 +12,9 @@ type Product_variables struct {
 	Has_legacy_camera_hal1 struct {
 		Cflags []string
 	}
+	Board_cant_reallocate_omx_buffers struct {
+		Cppflags []string
+	}
 	Should_skip_waiting_for_qsee struct {
 		Cflags []string
 	}
@@ -75,6 +78,7 @@ type ProductVariables struct {
 	Apply_msm8974_1440p_egl_workaround  *bool `json:",omitempty"`
 	Bootloader_message_offset  *int `json:",omitempty"`
 	Has_legacy_camera_hal1  *bool `json:",omitempty"`
+	Board_cant_reallocate_omx_buffers  *bool `json:",omitempty"`
 	Java_Source_Overlays *string `json:",omitempty"`
 	Should_skip_waiting_for_qsee  *bool `json:",omitempty"`
 	Specific_camera_parameter_library  *string `json:",omitempty"`
diff --git a/build/soong/soong_config.mk b/build/soong/soong_config.mk
index dda79782..546e61a1 100644
--- a/build/soong/soong_config.mk
+++ b/build/soong/soong_config.mk
@@ -8,6 +8,7 @@ $(call add_json_str_omitempty, Additional_gralloc_10_usage_bits, $(TARGET_ADDITI
 $(call add_json_bool, Apply_msm8974_1440p_egl_workaround, $(filter true,$(TARGET_MSM8974_1440P_EGL_WORKAROUND)))
 $(call add_json_val_default, Bootloader_message_offset, $(BOOTLOADER_MESSAGE_OFFSET), 0)
 $(call add_json_bool, Has_legacy_camera_hal1, $(filter true,$(TARGET_HAS_LEGACY_CAMERA_HAL1)))
+$(call add_json_bool, Board_cant_reallocate_omx_buffers, $(filter true,$(BOARD_CANT_REALLOCATE_OMX_BUFFERS)))
 $(call add_json_str, Java_Source_Overlays, $(JAVA_SOURCE_OVERLAYS))
 $(call add_json_bool, Should_skip_waiting_for_qsee, $(filter true,$(TARGET_KEYMASTER_SKIP_WAITING_FOR_QSEE)))
 $(call add_json_str, Specific_camera_parameter_library, $(TARGET_SPECIFIC_CAMERA_PARAMETER_LIBRARY))
-- 
2.28.0

