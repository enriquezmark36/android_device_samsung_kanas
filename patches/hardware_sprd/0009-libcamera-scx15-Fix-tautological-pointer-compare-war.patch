From 38eee8bade0f038d07ca25b69804352f363f1148 Mon Sep 17 00:00:00 2001
From: Mark Enriquez <enriquezmark36@gmail.com>
Date: Sat, 15 Dec 2018 17:52:47 +0800
Subject: [PATCH 09/11] libcamera: scx15: Fix tautological-pointer-compare
 warning/error in exif_writer

Change-Id: I83f0a43ff15c4515794364316fe3bd54d6dabd8e
Signed-off-by: Mark Enriquez <enriquezmark36@gmail.com>
---
 .../scx15/jpeg/jpeg_fw_8830/src/exif_writer.c      | 14 ++------------
 1 file changed, 2 insertions(+), 12 deletions(-)

diff --git a/libcamera/scx15/jpeg/jpeg_fw_8830/src/exif_writer.c b/libcamera/scx15/jpeg/jpeg_fw_8830/src/exif_writer.c
index 9da2ae1..7b2f397 100644
--- a/libcamera/scx15/jpeg/jpeg_fw_8830/src/exif_writer.c
+++ b/libcamera/scx15/jpeg/jpeg_fw_8830/src/exif_writer.c
@@ -446,7 +446,6 @@ LOCAL JPEG_RET_E Jpeg_WriteExifInteroperabilityInfo(JPEG_WRITE_STREAM_CONTEXT_T
     /***********************************************************************/
 
     if (valid.InteroperabilityIndex
-        && PNULL != inter_ptr->InteroperabilityIndex.ptr
         && inter_ptr->InteroperabilityIndex.count > 0)
     {
         ifd_info.tag = IFD_INTEROPERABILITYINDEX;
@@ -618,7 +617,6 @@ LOCAL JPEG_RET_E Jpeg_WriteExifSpecInfo(JPEG_WRITE_STREAM_CONTEXT_T *context_ptr
     }
 
     if (PNULL != pic_taking_cond_ptr && pic_taking_cond_ptr->valid.ISOSpeedRatings
-        && PNULL != pic_taking_cond_ptr->ISOSpeedRatings.ptr
         && pic_taking_cond_ptr->ISOSpeedRatings.count > 0)
     {
         //size of any
@@ -638,7 +636,6 @@ LOCAL JPEG_RET_E Jpeg_WriteExifSpecInfo(JPEG_WRITE_STREAM_CONTEXT_T *context_ptr
 
 
     if (PNULL != pic_taking_cond_ptr && pic_taking_cond_ptr->valid.OECF
-        && PNULL != pic_taking_cond_ptr->OECF.ptr
         && pic_taking_cond_ptr->OECF.count > 0)
     {
         //size of any
@@ -899,7 +896,6 @@ LOCAL JPEG_RET_E Jpeg_WriteExifSpecInfo(JPEG_WRITE_STREAM_CONTEXT_T *context_ptr
     }
 
     if (PNULL != pic_taking_cond_ptr && pic_taking_cond_ptr->valid.SubjectArea
-        && PNULL != pic_taking_cond_ptr->SubjectArea.ptr
         && pic_taking_cond_ptr->SubjectArea.count > 0)
     {
         ifd_info.tag = IFD_SUBJECTAREA;
@@ -916,7 +912,7 @@ LOCAL JPEG_RET_E Jpeg_WriteExifSpecInfo(JPEG_WRITE_STREAM_CONTEXT_T *context_ptr
         entries++;
     }
 
-    if (PNULL != user_ptr && user_ptr->MakerNote.ptr
+    if (PNULL != user_ptr
         && user_ptr->MakerNote.count > 0)
     {
         ifd_info.tag = IFD_MAKERNOTE;
@@ -933,8 +929,7 @@ LOCAL JPEG_RET_E Jpeg_WriteExifSpecInfo(JPEG_WRITE_STREAM_CONTEXT_T *context_ptr
         entries++;
     }
 
-    if (PNULL != user_ptr && user_ptr->UserComment.ptr
-        && user_ptr->UserComment.count > 0)
+    if (user_ptr->UserComment.count > 0)
     {
         ifd_info.tag = IFD_USERCOMMENT;
         ifd_info.type = IFD_UNDEFINED;
@@ -1121,7 +1116,6 @@ LOCAL JPEG_RET_E Jpeg_WriteExifSpecInfo(JPEG_WRITE_STREAM_CONTEXT_T *context_ptr
     }
 
     if (PNULL != pic_taking_cond_ptr && pic_taking_cond_ptr->valid.SpatialFrequencyResponse
-        && PNULL != pic_taking_cond_ptr->SpatialFrequencyResponse.ptr
         && pic_taking_cond_ptr->SpatialFrequencyResponse.count > 0)
     {
         ifd_info.tag = IFD_SPATIALFREQUENCYRESPONSE;
@@ -1267,7 +1261,6 @@ LOCAL JPEG_RET_E Jpeg_WriteExifSpecInfo(JPEG_WRITE_STREAM_CONTEXT_T *context_ptr
     }
 
     if (PNULL != pic_taking_cond_ptr && pic_taking_cond_ptr->valid.CFAPattern
-        && PNULL != pic_taking_cond_ptr->CFAPattern.ptr
         && pic_taking_cond_ptr->CFAPattern.count > 0)
     {
         ifd_info.tag = IFD_CFAPATTERN;
@@ -1445,7 +1438,6 @@ LOCAL JPEG_RET_E Jpeg_WriteExifSpecInfo(JPEG_WRITE_STREAM_CONTEXT_T *context_ptr
     }
 
     if (PNULL != pic_taking_cond_ptr && pic_taking_cond_ptr->valid.DeviceSettingDescription
-        && PNULL != pic_taking_cond_ptr->DeviceSettingDescription.ptr
         && pic_taking_cond_ptr->DeviceSettingDescription.count > 0)
     {
         ifd_info.tag = IFD_DEVICESETTINGDESCRIPTION;
@@ -1990,7 +1982,6 @@ LOCAL JPEG_RET_E Jpeg_WriteExifGPSInfo(JPEG_WRITE_STREAM_CONTEXT_T *context_ptr,
     }
 
     if (valid.GPSProcessingMethod
-        && PNULL != gps_ptr->GPSProcessingMethod.ptr
         && gps_ptr->GPSProcessingMethod.count > 0)
     {
         ifd_info.tag = IFD_GPSPROCESSINGMETHOD;
@@ -2008,7 +1999,6 @@ LOCAL JPEG_RET_E Jpeg_WriteExifGPSInfo(JPEG_WRITE_STREAM_CONTEXT_T *context_ptr,
     }
 
     if (valid.GPSAreaInformation
-        && PNULL != gps_ptr->GPSAreaInformation.ptr
         && gps_ptr->GPSAreaInformation.count > 0)
     {
         ifd_info.tag = IFD_GPSAREAINFORMATION;
-- 
2.19.2

